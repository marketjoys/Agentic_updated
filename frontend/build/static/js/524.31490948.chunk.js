"use strict";(self.webpackChunkemail_responder_frontend=self.webpackChunkemail_responder_frontend||[]).push([[524],{4505:(e,t,s)=>{s.d(t,{A:()=>o,K:()=>r});var n=s(6213);const a="https://030d008b-cc85-4bf3-afdd-411b8004d718.preview.emergentagent.com",l=n.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{var t;console.log("API Request:",null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),e.url);const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,s;if(console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),401===(null===(s=e.response)||void 0===s?void 0:s.status)){console.log("Received 401 error, attempting token refresh...");if(localStorage.getItem("token"))try{const t=await n.A.post(`${a}/api/auth/refresh`),{access_token:s}=t.data;localStorage.setItem("token",s);const l=e.config;return l.headers.Authorization=`Bearer ${s}`,(0,n.A)(l)}catch(l){console.error("Token refresh failed:",l),localStorage.removeItem("token"),window.location.href="/"}}return Promise.reject(e)});const r={healthCheck:()=>l.get("/api/health"),getProspects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return l.get(`/api/prospects?skip=${e}&limit=${t}`)},createProspect:e=>l.post("/api/prospects",e),uploadProspects:e=>{const t=new FormData;return t.append("file",e),l.post("/api/prospects/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},getTemplates:()=>l.get("/api/templates"),createTemplate:e=>l.post("/api/templates",e),getTemplate:e=>l.get(`/api/templates/${e}`),updateTemplate:(e,t)=>l.put(`/api/templates/${e}`,t),getCampaigns:()=>l.get("/api/campaigns"),createCampaign:e=>l.post("/api/campaigns",e),getCampaign:e=>l.get(`/api/campaigns/${e}`),sendCampaign:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("\ud83d\udce1 sendCampaign called with id:",e,"sendRequest:",t);const s={send_immediately:!0,email_provider_id:"",max_emails:1e3,schedule_type:"immediate",start_time:null,follow_up_enabled:!0,follow_up_intervals:[3,7,14],follow_up_templates:[],...t};return console.log("\ud83d\udce4 Final send request:",s),console.log("\ud83c\udfaf Making POST request to:",`/api/campaigns/${e}/send`),l.post(`/api/campaigns/${e}/send`,s)},getIntents:()=>l.get("/api/intents"),createIntent:e=>l.post("/api/intents",e),getIntent:e=>l.get(`/api/intents/${e}`),updateIntent:(e,t)=>l.put(`/api/intents/${e}`,t),deleteIntent:e=>l.delete(`/api/intents/${e}`),getCampaignAnalytics:e=>l.get(`/api/analytics/campaign/${e}`),getLists:()=>l.get("/api/lists"),createList:e=>l.post("/api/lists",e),getList:e=>l.get(`/api/lists/${e}`),updateList:(e,t)=>l.put(`/api/lists/${e}`,t),deleteList:e=>l.delete(`/api/lists/${e}`),addProspectsToList:(e,t)=>l.post(`/api/lists/${e}/prospects`,{prospect_ids:t}),removeProspectsFromList:(e,t)=>l.delete(`/api/lists/${e}/prospects`,{data:{prospect_ids:t}}),startEmailProcessing:()=>l.post("/api/email-processing/start"),stopEmailProcessing:()=>l.post("/api/email-processing/stop"),getProcessingStatus:()=>l.get("/api/email-processing/status"),getProcessingAnalytics:()=>l.get("/api/email-processing/analytics"),testIntentClassification:e=>l.post("/api/email-processing/test-classification",e),testResponseGeneration:e=>l.post("/api/email-processing/test-response",e),getThreads:()=>l.get("/api/threads"),getThread:e=>l.get(`/api/threads/${e}`),getThreadByProspect:e=>l.get(`/api/threads/prospect/${e}`),addMessageToThread:(e,t)=>l.post(`/api/threads/${e}/messages`,t),getEmailProviders:()=>l.get("/api/email-providers"),createEmailProvider:e=>l.post("/api/email-providers",e),updateEmailProvider:(e,t)=>l.put(`/api/email-providers/${e}`,t),deleteEmailProvider:e=>l.delete(`/api/email-providers/${e}`),setDefaultEmailProvider:e=>l.post(`/api/email-providers/${e}/set-default`),testEmailProvider:e=>l.post(`/api/email-providers/${e}/test-connection`),getFollowUpDashboard:()=>l.get("/api/follow-up-monitoring/dashboard"),getImapScanStatus:()=>l.get("/api/follow-up-monitoring/imap-scan-status"),getImapLogs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;return l.get(`/api/follow-up-monitoring/imap-logs?hours=${e}`)},getProspectResponses:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return l.get(`/api/follow-up-monitoring/prospect-responses?days=${e}`)},analyzeProspectThread:e=>l.get(`/api/follow-up-monitoring/thread-analysis/${e}`),forceStopFollowUp:e=>l.post(`/api/follow-up-monitoring/force-stop-follow-up/${e}`),restartFollowUp:e=>l.post(`/api/follow-up-monitoring/restart-follow-up/${e}`),getFollowUpHealthCheck:()=>l.get("/api/follow-up-monitoring/health-check"),startFollowUpEngine:()=>l.post("/api/follow-up-engine/start"),stopFollowUpEngine:()=>l.post("/api/follow-up-engine/stop"),getFollowUpEngineStatus:()=>l.get("/api/follow-up-engine/status"),getFollowUpStatistics:()=>l.get("/api/follow-up-engine/statistics"),processEmailResponse:e=>l.post("/api/follow-up-engine/process-response",e)},o=l},5524:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(5043),a=s(1360),l=s(1680),r=s(2105),o=s(7673),i=s(4265),c=s(5087),d=s(5327),m=s(4505),p=s(3768),u=s(614),x=s(4651),g=s(8693),h=s(6656),b=s(2823),y=s.n(b),f=(s(5884),s(579));const v=(0,n.forwardRef)((e,t)=>{let{value:s,onChange:a,placeholder:l,onKeyDown:r,className:o,...i}=e;const c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(c.current&&r){const e=c.current.getEditor(),t=e=>{r(e)};return e.root.addEventListener("keydown",t),()=>{e&&e.root&&e.root.removeEventListener("keydown",t)}}},[r]),(0,f.jsx)("div",{className:o,children:(0,f.jsx)(y(),{ref:e=>{c.current=e,t&&("function"===typeof t?t(e):t.current=e)},theme:"snow",value:s,onChange:a,placeholder:l,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]},formats:["header","bold","italic","underline","strike","color","background","list","bullet","indent","align","link","image","blockquote","code-block"],style:{height:"300px",marginBottom:"50px"},...i})})});v.displayName="RichTextEditor";const j=v,w=e=>{let{isOpen:t,onClose:s,template:a,onSave:l}=e;(0,h.A)(s,t);const[i,m]=(0,n.useState)("edit"),[b,y]=(0,n.useState)(!0),[v,w]=(0,n.useState)({name:"",subject:"",content:"",html_content:"",type:"email",is_html_enabled:!0,style_settings:{primaryColor:"#3B82F6",backgroundColor:"#FFFFFF",textColor:"#1F2937",font:"Arial, sans-serif",borderRadius:"8px"}}),[N,_]=(0,n.useState)("");(0,n.useEffect)(()=>{var e,t,s,n,l;a?w({name:a.name||"",subject:a.subject||"",content:a.content||"",html_content:a.html_content||k(a.content||""),type:a.type||"email",is_html_enabled:!1!==a.is_html_enabled,style_settings:{primaryColor:(null===(e=a.style_settings)||void 0===e?void 0:e.primaryColor)||"#3B82F6",backgroundColor:(null===(t=a.style_settings)||void 0===t?void 0:t.backgroundColor)||"#FFFFFF",textColor:(null===(s=a.style_settings)||void 0===s?void 0:s.textColor)||"#1F2937",font:(null===(n=a.style_settings)||void 0===n?void 0:n.font)||"Arial, sans-serif",borderRadius:(null===(l=a.style_settings)||void 0===l?void 0:l.borderRadius)||"8px"}}):w({name:"",subject:"",content:"",html_content:C(),type:"email",is_html_enabled:!0,style_settings:{primaryColor:"#3B82F6",backgroundColor:"#FFFFFF",textColor:"#1F2937",font:"Arial, sans-serif",borderRadius:"8px"}})},[a,t]),(0,n.useEffect)(()=>{v.is_html_enabled&&_(v.html_content)},[v.html_content,v.is_html_enabled]);const C=()=>'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>{{subject}}</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            line-height: 1.6;\n            color: #1F2937;\n            background-color: #f9fafb;\n            margin: 0;\n            padding: 20px;\n        }\n        .email-container {\n            max-width: 600px;\n            margin: 0 auto;\n            background-color: #FFFFFF;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n            overflow: hidden;\n        }\n        .header {\n            background-color: #3B82F6;\n            color: white;\n            padding: 20px;\n            text-align: center;\n        }\n        .content {\n            padding: 30px;\n        }\n        .footer {\n            background-color: #F3F4F6;\n            padding: 20px;\n            text-align: center;\n            font-size: 12px;\n            color: #6B7280;\n        }\n        .button {\n            display: inline-block;\n            background-color: #3B82F6;\n            color: white;\n            padding: 12px 24px;\n            text-decoration: none;\n            border-radius: 6px;\n            margin: 20px 0;\n        }\n        h1, h2, h3 { color: #1F2937; }\n        p { margin-bottom: 16px; }\n    </style>\n</head>\n<body>\n    <div class="email-container">\n        <div class="header">\n            <h1>Hello {{first_name}}!</h1>\n        </div>\n        <div class="content">\n            <p>Write your email content here...</p>\n            <p>You can use personalization like:</p>\n            <ul>\n                <li>{{first_name}} - First name</li>\n                <li>{{last_name}} - Last name</li>\n                <li>{{company}} - Company name</li>\n                <li>{{job_title}} - Job title</li>\n                <li>{{industry}} - Industry</li>\n            </ul>\n        </div>\n        <div class="footer">\n            <p>This email was sent to {{email}}</p>\n        </div>\n    </div>\n</body>\n</html>',k=e=>e?`<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>{{subject}}</title>\n    <style>\n        body {\n            font-family: ${v.style_settings.font};\n            line-height: 1.6;\n            color: ${v.style_settings.textColor};\n            background-color: #f9fafb;\n            margin: 0;\n            padding: 20px;\n        }\n        .email-container {\n            max-width: 600px;\n            margin: 0 auto;\n            background-color: ${v.style_settings.backgroundColor};\n            border-radius: ${v.style_settings.borderRadius};\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n            padding: 30px;\n        }\n        .header {\n            background-color: ${v.style_settings.primaryColor};\n            color: white;\n            padding: 20px;\n            text-align: center;\n            border-radius: ${v.style_settings.borderRadius} ${v.style_settings.borderRadius} 0 0;\n            margin: -30px -30px 30px -30px;\n        }\n        h1, h2, h3 { color: ${v.style_settings.textColor}; }\n        p { margin-bottom: 16px; }\n        .button {\n            display: inline-block;\n            background-color: ${v.style_settings.primaryColor};\n            color: white;\n            padding: 12px 24px;\n            text-decoration: none;\n            border-radius: 6px;\n            margin: 20px 0;\n        }\n        .ql-editor { border: none; padding: 0; }\n        .ql-editor p { margin-bottom: 16px; }\n        .ql-editor h1, .ql-editor h2, .ql-editor h3 { color: ${v.style_settings.textColor}; }\n    </style>\n</head>\n<body>\n    <div class="email-container">\n        <div class="header">\n            <h1>Hello {{first_name}}!</h1>\n        </div>\n        <div class="ql-editor">\n            ${e}\n        </div>\n        <div style="text-align: center; padding-top: 20px; border-top: 1px solid #e5e7eb; margin-top: 20px; font-size: 12px; color: #6b7280;">\n            <p>This email was sent to {{email}}</p>\n        </div>\n    </div>\n</body>\n</html>`:C(),F=(e,t)=>{w(s=>({...s,[e]:t}))},T=(e,t)=>{w(s=>({...s,style_settings:{...s.style_settings,[e]:t}})),$()},$=()=>{const{primaryColor:e,backgroundColor:t,textColor:s,font:n,borderRadius:a}=v.style_settings;let l=v.html_content;l=l.replace(/color: #[0-9A-Fa-f]{6}/g,`color: ${s}`),l=l.replace(/background-color: #[0-9A-Fa-f]{6}/g,`background-color: ${t}`),l=l.replace(/font-family: [^;]*/g,`font-family: ${n}`),l=l.replace(/border-radius: [^;]*/g,`border-radius: ${a}`),w(e=>({...e,html_content:l}))},E=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};if(!t)return null;return(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,f.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,f.jsx)(d.A,{className:"w-6 h-6 text-blue-600"}),(0,f.jsx)("h2",{className:"text-2xl font-bold",children:a?"Edit Template":"Create HTML Email Template"})]}),(0,f.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,f.jsx)(u.A,{className:"w-6 h-6"})})]}),(0,f.jsxs)("div",{className:"flex-1 flex",children:[(0,f.jsxs)("div",{className:"w-1/2 p-6 border-r overflow-y-auto",children:[(0,f.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),(0,f.jsx)("input",{type:"text",value:v.name,onChange:e=>F("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter template name..."})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Line *"}),(0,f.jsx)("input",{type:"text",value:v.subject,onChange:e=>F("subject",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter subject line..."})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type"}),(0,f.jsxs)("select",{value:v.type,onChange:e=>F("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,f.jsx)("option",{value:"email",children:"Email Campaign"}),(0,f.jsx)("option",{value:"follow-up",children:"Follow-up"}),(0,f.jsx)("option",{value:"auto-response",children:"Auto Response"})]})]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,f.jsx)("input",{type:"checkbox",checked:v.is_html_enabled,onChange:e=>F("is_html_enabled",e.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),(0,f.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable HTML Editor"}),!v.is_html_enabled&&v.content&&(0,f.jsx)("button",{onClick:()=>{const e=k(v.content);w(t=>({...t,html_content:e,is_html_enabled:!0})),p.oR.success("Text converted to HTML template")},className:"text-sm text-blue-600 hover:text-blue-800",children:"Convert to HTML"})]}),(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:v.is_html_enabled?"Template Content":"Text Content"}),(0,f.jsxs)("div",{className:"flex space-x-2",children:[(0,f.jsxs)("button",{onClick:()=>m("edit"),className:"px-3 py-1 text-sm rounded "+("edit"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,f.jsx)(r.A,{className:"w-4 h-4 inline mr-1"}),"Edit"]}),v.is_html_enabled&&(0,f.jsx)("button",{onClick:()=>y(!b),className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 rounded",children:b?(0,f.jsx)(x.A,{className:"w-4 h-4"}):(0,f.jsx)(c.A,{className:"w-4 h-4"})})]})]}),v.is_html_enabled?(0,f.jsx)(j,{value:v.html_content,onChange:e=>{F("html_content",e),$()},onKeyDown:e=>{"Escape"===e.key&&e.stopPropagation()},placeholder:"Create your email template here. Use the toolbar above to format your content...",className:"border border-gray-300 rounded-lg min-h-[300px]"}):(0,f.jsx)(j,{value:v.content,onChange:e=>F("content",e),onKeyDown:e=>{"Escape"===e.key&&e.stopPropagation()},placeholder:"Enter your email content here. Use the toolbar above to format your text...",className:"border border-gray-300 rounded-lg"})]}),(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personalization Tags"}),(0,f.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["first_name","last_name","company","job_title","industry","email"].map(e=>(0,f.jsx)("button",{onClick:()=>(e=>{const t=document.querySelector('textarea[data-field="html_content"]');if(t){const s=t.selectionStart,n=t.selectionEnd,a=t.value,l=a.substring(0,s),r=a.substring(n),o=l+`{{${e}}}`+r;w(e=>({...e,html_content:o})),setTimeout(()=>{t.focus(),t.setSelectionRange(s+e.length+4,s+e.length+4)},0)}})(e),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded border",children:`{{${e}}}`},e))})]}),v.is_html_enabled&&(0,f.jsxs)("div",{className:"mb-6",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,f.jsx)(o.A,{className:"w-5 h-5 text-gray-600"}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Style Settings"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Primary Color"}),(0,f.jsx)("input",{type:"color",value:v.style_settings.primaryColor,onChange:e=>T("primaryColor",e.target.value),className:"w-full h-10 border border-gray-300 rounded"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Background Color"}),(0,f.jsx)("input",{type:"color",value:v.style_settings.backgroundColor,onChange:e=>T("backgroundColor",e.target.value),className:"w-full h-10 border border-gray-300 rounded"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Text Color"}),(0,f.jsx)("input",{type:"color",value:v.style_settings.textColor,onChange:e=>T("textColor",e.target.value),className:"w-full h-10 border border-gray-300 rounded"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Font Family"}),(0,f.jsxs)("select",{value:v.style_settings.font,onChange:e=>T("font",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",children:[(0,f.jsx)("option",{value:"Arial, sans-serif",children:"Arial"}),(0,f.jsx)("option",{value:"Helvetica, sans-serif",children:"Helvetica"}),(0,f.jsx)("option",{value:"Georgia, serif",children:"Georgia"}),(0,f.jsx)("option",{value:"Times New Roman, serif",children:"Times New Roman"}),(0,f.jsx)("option",{value:"Verdana, sans-serif",children:"Verdana"})]})]})]})]})]}),(0,f.jsxs)("div",{className:"w-1/2 p-6 bg-gray-50",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Preview"}),(0,f.jsx)("div",{className:"text-sm text-gray-600",children:v.is_html_enabled?"HTML Preview":"Text Preview"})]}),(0,f.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg h-full overflow-auto",children:v.is_html_enabled&&b?(0,f.jsx)("iframe",{srcDoc:N,className:"w-full h-full",title:"Email Preview"}):(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded border-l-4 border-blue-400",children:[(0,f.jsx)("strong",{children:"Subject:"})," ",v.subject||"No subject"]}),(0,f.jsx)("div",{className:"whitespace-pre-wrap text-sm text-gray-800",children:v.is_html_enabled?E(v.html_content):v.content||"No content"})]})})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between p-6 border-t",children:[(0,f.jsx)("div",{className:"text-sm text-gray-600",children:v.is_html_enabled?"HTML template with rich formatting":"Plain text template"}),(0,f.jsxs)("div",{className:"flex space-x-3",children:[(0,f.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,f.jsxs)("button",{onClick:async()=>{try{if(!v.name.trim())return void p.oR.error("Please enter a template name");if(!v.subject.trim())return void p.oR.error("Please enter a subject line");const e={...v,content:v.content||E(v.html_content)};await l(e),p.oR.success(`Template ${a?"updated":"created"} successfully`),s()}catch(e){console.error("Error saving template:",e),p.oR.error("Failed to save template")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,f.jsx)(g.A,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:"Save Template"})]})]})]})]})})},N=e=>{var t,s;let{template:n,onEdit:a}=e;return(0,f.jsx)("div",{className:"card",children:(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:n.name}),n.is_html_enabled&&(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,f.jsx)(r.A,{className:"h-4 w-4 text-purple-600"}),(0,f.jsx)("span",{className:"text-xs text-purple-600",children:"HTML"})]})]}),(0,f.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${(e=>{switch(e){case"initial":return"bg-blue-100 text-blue-800";case"follow_up":return"bg-green-100 text-green-800";case"auto_response":return"bg-purple-100 text-purple-800";case"email":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}})(n.type)}`,children:(null===(t=n.type)||void 0===t?void 0:t.replace("_"," "))||"Email"})]}),(0,f.jsx)("p",{className:"text-sm text-secondary-600 mb-3",children:n.subject}),(0,f.jsx)("div",{className:"text-sm text-secondary-500 mb-4",children:(0,f.jsx)("div",{className:"max-h-20 overflow-hidden",children:n.content?n.content.substring(0,100)+(n.content.length>100?"...":""):"No content preview"})}),(0,f.jsxs)("div",{className:"flex justify-between items-center",children:[(0,f.jsxs)("div",{className:"text-xs text-secondary-400 flex items-center space-x-2",children:[(0,f.jsx)("span",{children:n.created_at?new Date(n.created_at).toLocaleDateString():"Unknown date"}),(null===(s=n.style_settings)||void 0===s?void 0:s.primaryColor)&&(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,f.jsx)(o.A,{className:"h-3 w-3"}),(0,f.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:n.style_settings.primaryColor}})]})]}),(0,f.jsxs)("div",{className:"flex space-x-2",children:[(0,f.jsx)("button",{onClick:()=>a(n),className:"p-1 text-secondary-400 hover:text-primary-600 transition-colors",title:"Edit Template",children:(0,f.jsx)(i.A,{className:"h-4 w-4"})}),(0,f.jsx)("button",{className:"p-1 text-secondary-400 hover:text-primary-600 transition-colors",title:"Preview Template",children:(0,f.jsx)(c.A,{className:"h-4 w-4"})}),n.is_html_enabled&&(0,f.jsx)("button",{className:"p-1 text-secondary-400 hover:text-primary-600 transition-colors",title:"HTML Template",children:(0,f.jsx)(d.A,{className:"h-4 w-4"})})]})]})]})})},_=()=>{const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await m.K.getTemplates();t(e.data)}catch(e){p.Ay.error("Failed to load templates")}finally{r(!1)}},x=e=>{d(e),i(!0)};return s?(0,f.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,f.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-secondary-900",children:"Email Templates"}),(0,f.jsxs)("button",{onClick:()=>{d(null),i(!0)},className:"btn btn-primary",children:[(0,f.jsx)(a.A,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:"Initial"}),(0,f.jsx)("p",{className:"text-sm text-secondary-600",children:"First contact templates"})]}),(0,f.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,f.jsx)(l.A,{className:"h-4 w-4 text-blue-600"})})]})})}),(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:"Follow-up"}),(0,f.jsx)("p",{className:"text-sm text-secondary-600",children:"Sequence templates"})]}),(0,f.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,f.jsx)(l.A,{className:"h-4 w-4 text-green-600"})})]})})}),(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:"Auto-response"}),(0,f.jsx)("p",{className:"text-sm text-secondary-600",children:"AI-generated replies"})]}),(0,f.jsx)("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,f.jsx)(l.A,{className:"h-4 w-4 text-purple-600"})})]})})})]}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,f.jsx)(N,{template:e,onEdit:x},e.id))}),(0,f.jsx)(w,{isOpen:o,template:c,onClose:()=>{i(!1),d(null)},onSave:async e=>{try{c?(await m.K.updateTemplate(c.id,e),p.Ay.success("Template updated successfully")):(await m.K.createTemplate(e),p.Ay.success("Template created successfully")),i(!1),d(null),u()}catch(t){p.Ay.error("Failed to save template")}}})]})}},6656:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(5043);const a=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.useEffect)(()=>{if(!t)return;const s=t=>{"Escape"===t.key&&(t.preventDefault(),t.stopPropagation(),e())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e,t])}}}]);
//# sourceMappingURL=524.31490948.chunk.js.map