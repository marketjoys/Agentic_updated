/*! For license information please see 936.b6606206.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemail_responder_frontend=self.webpackChunkemail_responder_frontend||[]).push([[936],{1360:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4265:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4505:(e,s,t)=>{t.d(s,{A:()=>o,K:()=>l});var a=t(6213);const n="https://6464b8e1-a5e1-4bb7-b2f5-42bbc07856fb.preview.emergentagent.com",i=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{var s;console.log("API Request:",null===(s=e.method)||void 0===s?void 0:s.toUpperCase(),e.url);const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var s,t;if(console.error("API Error:",(null===(s=e.response)||void 0===s?void 0:s.data)||e.message),401===(null===(t=e.response)||void 0===t?void 0:t.status)){console.log("Received 401 error, attempting token refresh...");if(localStorage.getItem("token"))try{const s=await a.A.post(`${n}/api/auth/refresh`),{access_token:t}=s.data;localStorage.setItem("token",t);const i=e.config;return i.headers.Authorization=`Bearer ${t}`,(0,a.A)(i)}catch(i){console.error("Token refresh failed:",i),localStorage.removeItem("token"),window.location.href="/"}}return Promise.reject(e)});const l={healthCheck:()=>i.get("/api/health"),getProspects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return i.get(`/api/prospects?skip=${e}&limit=${s}`)},createProspect:e=>i.post("/api/prospects",e),uploadProspects:e=>{const s=new FormData;return s.append("file",e),i.post("/api/prospects/upload",s,{headers:{"Content-Type":"multipart/form-data"}})},getTemplates:()=>i.get("/api/templates"),createTemplate:e=>i.post("/api/templates",e),getTemplate:e=>i.get(`/api/templates/${e}`),updateTemplate:(e,s)=>i.put(`/api/templates/${e}`,s),getCampaigns:()=>i.get("/api/campaigns"),createCampaign:e=>i.post("/api/campaigns",e),getCampaign:e=>i.get(`/api/campaigns/${e}`),sendCampaign:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("\ud83d\udce1 sendCampaign called with id:",e,"sendRequest:",s);const t={send_immediately:!0,email_provider_id:"",max_emails:1e3,schedule_type:"immediate",start_time:null,follow_up_enabled:!0,follow_up_intervals:[3,7,14],follow_up_templates:[],...s};return console.log("\ud83d\udce4 Final send request:",t),console.log("\ud83c\udfaf Making POST request to:",`/api/campaigns/${e}/send`),i.post(`/api/campaigns/${e}/send`,t)},getIntents:()=>i.get("/api/intents"),createIntent:e=>i.post("/api/intents",e),getIntent:e=>i.get(`/api/intents/${e}`),updateIntent:(e,s)=>i.put(`/api/intents/${e}`,s),deleteIntent:e=>i.delete(`/api/intents/${e}`),getCampaignAnalytics:e=>i.get(`/api/analytics/campaign/${e}`),getLists:()=>i.get("/api/lists"),createList:e=>i.post("/api/lists",e),getList:e=>i.get(`/api/lists/${e}`),updateList:(e,s)=>i.put(`/api/lists/${e}`,s),deleteList:e=>i.delete(`/api/lists/${e}`),addProspectsToList:(e,s)=>i.post(`/api/lists/${e}/prospects`,{prospect_ids:s}),removeProspectsFromList:(e,s)=>i.delete(`/api/lists/${e}/prospects`,{data:{prospect_ids:s}}),startEmailProcessing:()=>i.post("/api/email-processing/start"),stopEmailProcessing:()=>i.post("/api/email-processing/stop"),getProcessingStatus:()=>i.get("/api/email-processing/status"),getProcessingAnalytics:()=>i.get("/api/email-processing/analytics"),testIntentClassification:e=>i.post("/api/email-processing/test-classification",e),testResponseGeneration:e=>i.post("/api/email-processing/test-response",e),getThreads:()=>i.get("/api/threads"),getThread:e=>i.get(`/api/threads/${e}`),getThreadByProspect:e=>i.get(`/api/threads/prospect/${e}`),addMessageToThread:(e,s)=>i.post(`/api/threads/${e}/messages`,s),getEmailProviders:()=>i.get("/api/email-providers"),createEmailProvider:e=>i.post("/api/email-providers",e),updateEmailProvider:(e,s)=>i.put(`/api/email-providers/${e}`,s),deleteEmailProvider:e=>i.delete(`/api/email-providers/${e}`),setDefaultEmailProvider:e=>i.post(`/api/email-providers/${e}/set-default`),testEmailProvider:e=>i.post(`/api/email-providers/${e}/test-connection`),getFollowUpDashboard:()=>i.get("/api/follow-up-monitoring/dashboard"),getImapScanStatus:()=>i.get("/api/follow-up-monitoring/imap-scan-status"),getImapLogs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;return i.get(`/api/follow-up-monitoring/imap-logs?hours=${e}`)},getProspectResponses:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return i.get(`/api/follow-up-monitoring/prospect-responses?days=${e}`)},analyzeProspectThread:e=>i.get(`/api/follow-up-monitoring/thread-analysis/${e}`),forceStopFollowUp:e=>i.post(`/api/follow-up-monitoring/force-stop-follow-up/${e}`),restartFollowUp:e=>i.post(`/api/follow-up-monitoring/restart-follow-up/${e}`),getFollowUpHealthCheck:()=>i.get("/api/follow-up-monitoring/health-check"),startFollowUpEngine:()=>i.post("/api/follow-up-engine/start"),stopFollowUpEngine:()=>i.post("/api/follow-up-engine/stop"),getFollowUpEngineStatus:()=>i.get("/api/follow-up-engine/status"),getFollowUpStatistics:()=>i.get("/api/follow-up-engine/statistics"),processEmailResponse:e=>i.post("/api/follow-up-engine/process-response",e)},o=i},4936:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(5043),n=t(1360),i=t(6382),l=t(4265),o=t(9855),r=t(4669),c=t(4505),d=t(3768),p=t(579);const m=e=>{let{intent:s,onEdit:t,onDelete:a}=e;return(0,p.jsx)("div",{className:"card",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:s.name}),(0,p.jsxs)("div",{className:"flex space-x-1",children:[(0,p.jsx)("button",{onClick:()=>t(s),className:"p-1 text-secondary-400 hover:text-primary-600",children:(0,p.jsx)(l.A,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>a(s.id),className:"p-1 text-secondary-400 hover:text-red-600",children:(0,p.jsx)(o.A,{className:"h-4 w-4"})})]})]}),(0,p.jsx)("p",{className:"text-sm text-secondary-600 mb-4",children:s.description}),s.keywords&&s.keywords.length>0&&(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("p",{className:"text-xs text-secondary-500 mb-2",children:"Keywords:"}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.keywords.slice(0,3).map((e,s)=>(0,p.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded",children:e},s)),s.keywords.length>3&&(0,p.jsxs)("span",{className:"px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded",children:["+",s.keywords.length-3," more"]})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"text-xs text-secondary-400",children:["Created ",new Date(s.created_at).toLocaleDateString()]}),(0,p.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,p.jsx)(r.A,{className:"h-4 w-4 text-secondary-400"}),(0,p.jsx)("span",{className:"text-xs text-secondary-400",children:"AI Ready"})]})]})]})})},x=e=>{var s;let{intent:t,onClose:n,onSave:i}=e;const[l,o]=(0,a.useState)({name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||"",keywords:(null===t||void 0===t||null===(s=t.keywords)||void 0===s?void 0:s.join(", "))||"",primary_template_id:(null===t||void 0===t?void 0:t.primary_template_id)||"",fallback_template_id:(null===t||void 0===t?void 0:t.fallback_template_id)||"",auto_respond:(null===t||void 0===t?void 0:t.auto_respond)||!0,response_delay_min:(null===t||void 0===t?void 0:t.response_delay_min)||5,response_delay_max:(null===t||void 0===t?void 0:t.response_delay_max)||60,confidence_threshold:(null===t||void 0===t?void 0:t.confidence_threshold)||.7,escalate_to_human:(null===t||void 0===t?void 0:t.escalate_to_human)||!1}),[r,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await c.K.getTemplates();d(e.data)}catch(e){console.error("Failed to load templates:",e)}},x=e=>{const{name:s,value:t,type:a,checked:n}=e.target;o({...l,[s]:"checkbox"===a?n:t})},h=r.filter(e=>"auto_response"===e.type);return(0,p.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,p.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black opacity-30"}),(0,p.jsxs)("div",{className:"relative bg-white rounded-lg max-w-3xl w-full p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-4",children:t?"Edit Intent":"Create New Intent"}),(0,p.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s={...l,keywords:l.keywords.split(",").map(e=>e.trim()).filter(e=>e)};i(s)},className:"space-y-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Intent Name *"}),(0,p.jsx)("input",{type:"text",name:"name",value:l.name,onChange:x,placeholder:"e.g., Positive Response, Not Interested, Request Info",className:"input",required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Confidence Threshold"}),(0,p.jsxs)("select",{name:"confidence_threshold",value:l.confidence_threshold,onChange:x,className:"input",children:[(0,p.jsx)("option",{value:.5,children:"50% (Low)"}),(0,p.jsx)("option",{value:.6,children:"60% (Medium-Low)"}),(0,p.jsx)("option",{value:.7,children:"70% (Medium)"}),(0,p.jsx)("option",{value:.8,children:"80% (High)"}),(0,p.jsx)("option",{value:.9,children:"90% (Very High)"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Description *"}),(0,p.jsx)("textarea",{name:"description",value:l.description,onChange:x,placeholder:"Describe what kind of emails should trigger this intent...",rows:"3",className:"input",required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Keywords (Optional)"}),(0,p.jsx)("input",{type:"text",name:"keywords",value:l.keywords,onChange:x,placeholder:"interested, yes, tell me more, not interested, no thanks",className:"input"}),(0,p.jsx)("p",{className:"text-xs text-secondary-500 mt-1",children:"Separate keywords with commas. These help the AI identify this intent."})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Primary Template"}),(0,p.jsxs)("select",{name:"primary_template_id",value:l.primary_template_id,onChange:x,className:"input",children:[(0,p.jsx)("option",{value:"",children:"Select primary template"}),h.map(e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Fallback Template"}),(0,p.jsxs)("select",{name:"fallback_template_id",value:l.fallback_template_id,onChange:x,className:"input",children:[(0,p.jsx)("option",{value:"",children:"Select fallback template"}),h.map(e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Response Delay (Min)"}),(0,p.jsx)("input",{type:"number",name:"response_delay_min",value:l.response_delay_min,onChange:x,min:"1",max:"60",className:"input"}),(0,p.jsx)("p",{className:"text-xs text-secondary-500 mt-1",children:"Minutes"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Response Delay (Max)"}),(0,p.jsx)("input",{type:"number",name:"response_delay_max",value:l.response_delay_max,onChange:x,min:"1",max:"120",className:"input"}),(0,p.jsx)("p",{className:"text-xs text-secondary-500 mt-1",children:"Minutes"})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,p.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,p.jsx)("input",{type:"checkbox",name:"auto_respond",checked:l.auto_respond,onChange:x,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,p.jsx)("span",{className:"text-sm text-secondary-700",children:"Auto-respond to this intent"})]}),(0,p.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,p.jsx)("input",{type:"checkbox",name:"escalate_to_human",checked:l.escalate_to_human,onChange:x,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,p.jsx)("span",{className:"text-sm text-secondary-700",children:"Escalate to human"})]})]}),(0,p.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,p.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),(0,p.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[t?"Update":"Create"," Intent"]})]})]})]})]})})},h=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[o,r]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=await c.K.getIntents();s(e.data)}catch(e){d.Ay.error("Failed to load intents")}finally{l(!1)}},y=async e=>{if(window.confirm("Are you sure you want to delete this intent?"))try{await c.K.deleteIntent(e),d.Ay.success("Intent deleted successfully"),g()}catch(s){d.Ay.error("Failed to delete intent")}},v=e=>{u(e),r(!0)},f=()=>{u(null),r(!0)};return t?(0,p.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,p.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-secondary-900",children:"Intent Management"}),(0,p.jsx)("p",{className:"text-secondary-600 mt-1",children:"Configure AI intent classification for automatic responses"})]}),(0,p.jsxs)("button",{onClick:f,className:"btn btn-primary",children:[(0,p.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"New Intent"]})]}),(0,p.jsx)("div",{className:"card",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsxs)("div",{className:"flex items-center mb-3",children:[(0,p.jsx)(i.A,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,p.jsx)("h3",{className:"text-lg font-semibold text-secondary-900",children:"How Intent Classification Works"})]}),(0,p.jsx)("p",{className:"text-sm text-secondary-600 mb-4",children:"When an email is received, the AI analyzes the content and classifies it based on the intents you've configured. Each intent should have a clear name and detailed description to help the AI understand when to trigger it."}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),(0,p.jsx)("span",{className:"text-sm text-secondary-600",children:"Positive Response"})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),(0,p.jsx)("span",{className:"text-sm text-secondary-600",children:"Negative Response"})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("div",{className:"h-2 w-2 bg-yellow-500 rounded-full"}),(0,p.jsx)("span",{className:"text-sm text-secondary-600",children:"Question/Inquiry"})]})]})]})}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,p.jsx)(m,{intent:e,onEdit:v,onDelete:y},e.id))}),0===e.length&&(0,p.jsx)("div",{className:"card",children:(0,p.jsxs)("div",{className:"card-body text-center py-12",children:[(0,p.jsx)(i.A,{className:"h-12 w-12 text-secondary-400 mx-auto mb-4"}),(0,p.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-2",children:"No Intents Configured"}),(0,p.jsx)("p",{className:"text-secondary-600 mb-4",children:"Create your first intent to enable AI-powered automatic responses"}),(0,p.jsxs)("button",{onClick:f,className:"btn btn-primary",children:[(0,p.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Create Intent"]})]})}),o&&(0,p.jsx)(x,{intent:h,onClose:()=>{r(!1),u(null)},onSave:async e=>{try{h?(await c.K.updateIntent(h.id,e),d.Ay.success("Intent updated successfully")):(await c.K.createIntent(e),d.Ay.success("Intent created successfully")),r(!1),u(null),g()}catch(s){d.Ay.error("Failed to save intent")}}})]})}},9855:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=936.b6606206.chunk.js.map