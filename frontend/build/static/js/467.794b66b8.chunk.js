/*! For license information please see 467.794b66b8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemail_responder_frontend=self.webpackChunkemail_responder_frontend||[]).push([[467],{2467:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(5043),i=t(4319),n=t(9875),r=t(5613),l=t(5088),c=t(4669),d=t(5087),o=t(4265),x=t(3768),m=t(6213),h=t(579);const p="https://6464b8e1-a5e1-4bb7-b2f5-42bbc07856fb.preview.emergentagent.com",j=()=>{const[e,s]=(0,a.useState)([]),[t,j]=(0,a.useState)({}),[g,v]=(0,a.useState)(!0),[u,y]=(0,a.useState)("pending"),[f,N]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[_,A]=(0,a.useState)(null),[C,k]=(0,a.useState)(""),[S,R]=(0,a.useState)(""),[F,$]=(0,a.useState)("");(0,a.useEffect)(()=>{V(),q()},[u]);const V=async()=>{try{const e="pending"===u?`${p}/api/response-verification/pending`:`${p}/api/response-verification`,t=await m.A.get(e);s(t.data)}catch(e){console.error("Error fetching verifications:",e),x.Ay.error("Failed to load verifications")}finally{v(!1)}},q=async()=>{try{const e=await m.A.get(`${p}/api/response-verification/statistics`);j(e.data)}catch(e){console.error("Error fetching statistics:",e)}},z=e=>{switch(e){case"approved":return(0,h.jsx)(i.A,{className:"w-5 h-5 text-green-500"});case"rejected":return(0,h.jsx)(n.A,{className:"w-5 h-5 text-red-500"});case"needs_review":return(0,h.jsx)(r.A,{className:"w-5 h-5 text-yellow-500"});default:return(0,h.jsx)(l.A,{className:"w-5 h-5 text-gray-500"})}},E=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"needs_review":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},M=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600",O=e=>{let{show:s,onClose:t,verification:a}=e;return s&&a?(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsx)("h2",{className:"text-xl font-bold",children:"Response Verification Details"}),(0,h.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Status"}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[z(a.status),(0,h.jsx)("span",{className:`px-2 py-1 text-sm rounded ${E(a.status)}`,children:a.status.replace("_"," ").toUpperCase()})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Overall Score"}),(0,h.jsxs)("span",{className:`text-2xl font-bold ${M(a.overall_score)}`,children:[(100*a.overall_score).toFixed(1),"%"]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Verification Scores"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Context Alignment:"}),(0,h.jsxs)("span",{className:M(a.context_score),children:[(100*a.context_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Intent Accuracy:"}),(0,h.jsxs)("span",{className:M(a.intent_alignment_score),children:[(100*a.intent_alignment_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Content Quality:"}),(0,h.jsxs)("span",{className:M(a.content_quality_score),children:[(100*a.content_quality_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Personalization:"}),(0,h.jsxs)("span",{className:M(a.personalization_score),children:[(100*a.personalization_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Professional Tone:"}),(0,h.jsxs)("span",{className:M(a.tone_score),children:[(100*a.tone_score).toFixed(1),"%"]})]})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Verification Notes"}),(0,h.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,h.jsx)("p",{className:"text-sm text-gray-700",children:a.verification_notes||"No notes available"})})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Original Content"}),(0,h.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,h.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:a.original_content})})]}),a.verified_content!==a.original_content&&(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Verified Content"}),(0,h.jsx)("div",{className:"bg-blue-50 p-4 rounded-md",children:(0,h.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:a.verified_content})})]}),a.suggested_changes&&(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Changes"}),(0,h.jsx)("div",{className:"bg-yellow-50 p-4 rounded-md",children:(0,h.jsx)("p",{className:"text-sm text-gray-700",children:a.suggested_changes})})]}),a.manual_review_notes&&(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Manual Review Notes"}),(0,h.jsxs)("div",{className:"bg-green-50 p-4 rounded-md",children:[(0,h.jsx)("p",{className:"text-sm text-gray-700",children:a.manual_review_notes}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed by: ",a.manual_reviewer]})]})]})]})]})}):null},P=e=>{let{show:s,onClose:t,verification:a}=e;return s&&a?(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsx)("h2",{className:"text-xl font-bold",children:"Manual Review"}),(0,h.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Overall Score"}),(0,h.jsxs)("span",{className:`text-2xl font-bold ${M(a.overall_score)}`,children:[(100*a.overall_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Verification Notes"}),(0,h.jsx)("p",{className:"text-sm text-gray-700",children:a.verification_notes})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Original Content"}),(0,h.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,h.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:a.original_content})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Edit Content (Optional)"}),(0,h.jsx)("textarea",{value:F,onChange:e=>$(e.target.value),rows:8,className:"w-full px-3 py-2 border rounded-md"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Review Notes"}),(0,h.jsx)("textarea",{value:C,onChange:e=>k(e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md",placeholder:"Add your review notes..."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Changes (if rejecting)"}),(0,h.jsx)("textarea",{value:S,onChange:e=>R(e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md",placeholder:"Suggest specific improvements..."})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,h.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",children:"Cancel"}),F!==a.original_content&&(0,h.jsx)("button",{onClick:()=>(async e=>{try{await m.A.put(`${p}/api/response-verification/${e}/content`,{content:F}),x.Ay.success("Response content updated successfully"),w(!1),V()}catch(s){console.error("Error updating content:",s),x.Ay.error("Failed to update content")}})(a.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Content"}),(0,h.jsx)("button",{onClick:()=>(async e=>{try{await m.A.post(`${p}/api/response-verification/${e}/reject`,{reviewer:"Manual Review",notes:C,suggested_changes:S}),x.Ay.success("Response rejected successfully"),w(!1),V(),q()}catch(s){console.error("Error rejecting verification:",s),x.Ay.error("Failed to reject response")}})(a.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Reject"}),(0,h.jsx)("button",{onClick:()=>(async e=>{try{await m.A.post(`${p}/api/response-verification/${e}/approve`,{reviewer:"Manual Review",notes:C}),x.Ay.success("Response approved successfully"),w(!1),V(),q()}catch(s){console.error("Error approving verification:",s),x.Ay.error("Failed to approve response")}})(a.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Approve"})]})]})]})}):null};return g?(0,h.jsx)("div",{className:"p-6",children:(0,h.jsxs)("div",{className:"animate-pulse",children:[(0,h.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)("div",{className:"h-20 bg-gray-200 rounded"}),(0,h.jsx)("div",{className:"h-20 bg-gray-200 rounded"}),(0,h.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):(0,h.jsxs)("div",{className:"p-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Response Verification"}),(0,h.jsx)("p",{className:"text-gray-600",children:"Review and approve AI-generated responses"})]}),(0,h.jsx)("div",{className:"flex space-x-3",children:(0,h.jsxs)("select",{value:u,onChange:e=>y(e.target.value),className:"px-4 py-2 border rounded-lg",children:[(0,h.jsx)("option",{value:"pending",children:"Pending Review"}),(0,h.jsx)("option",{value:"needs_review",children:"Needs Review"}),(0,h.jsx)("option",{value:"approved",children:"Approved"}),(0,h.jsx)("option",{value:"rejected",children:"Rejected"}),(0,h.jsx)("option",{value:"all",children:"All"})]})})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,h.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"Total Verifications"}),(0,h.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.total_verifications||0})]}),(0,h.jsx)(c.A,{className:"w-8 h-8 text-blue-500"})]})}),(0,h.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"Pending"}),(0,h.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.pending_verifications||0})]}),(0,h.jsx)(l.A,{className:"w-8 h-8 text-yellow-500"})]})}),(0,h.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"Approved"}),(0,h.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.approved_verifications||0})]}),(0,h.jsx)(i.A,{className:"w-8 h-8 text-green-500"})]})}),(0,h.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"Rejected"}),(0,h.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.rejected_verifications||0})]}),(0,h.jsx)(n.A,{className:"w-8 h-8 text-red-500"})]})})]}),(0,h.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[(0,h.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[z(e.status),(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Verification #",e.id.substring(0,8)]}),(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:`px-2 py-1 text-xs rounded ${E(e.status)}`,children:e.status.replace("_"," ").toUpperCase()}),(0,h.jsxs)("span",{className:`text-lg font-bold ${M(e.overall_score)}`,children:[(100*e.overall_score).toFixed(1),"%"]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Verification Scores"}),(0,h.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Context:"}),(0,h.jsxs)("span",{className:M(e.context_score),children:[(100*e.context_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Intent:"}),(0,h.jsxs)("span",{className:M(e.intent_alignment_score),children:[(100*e.intent_alignment_score).toFixed(1),"%"]})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("span",{children:"Quality:"}),(0,h.jsxs)("span",{className:M(e.content_quality_score),children:[(100*e.content_quality_score).toFixed(1),"%"]})]})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Notes"}),(0,h.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.verification_notes||"No notes available"})]})]}),(0,h.jsx)("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:(0,h.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.original_content})}),(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsxs)("button",{onClick:()=>(e=>{A(e),N(!0)})(e),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-md hover:bg-blue-700 flex items-center justify-center space-x-1",children:[(0,h.jsx)(d.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"View Details"})]}),("pending"===e.status||"needs_review"===e.status)&&(0,h.jsxs)("button",{onClick:()=>(e=>{A(e),k(""),R(""),$(e.verified_content||e.original_content),w(!0)})(e),className:"bg-green-600 text-white py-2 px-3 rounded-md hover:bg-green-700 flex items-center justify-center space-x-1",children:[(0,h.jsx)(o.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"Review"})]})]})]},e.id))}),0===e.length&&(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)(c.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No verifications found"}),(0,h.jsx)("p",{className:"text-gray-600",children:"pending"===u?"No responses are currently pending verification":"No verifications match your current filter"})]}),(0,h.jsx)(O,{show:f,onClose:()=>N(!1),verification:_}),(0,h.jsx)(P,{show:b,onClose:()=>w(!1),verification:_})]})}},4265:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},5088:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5613:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9875:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}}]);
//# sourceMappingURL=467.794b66b8.chunk.js.map